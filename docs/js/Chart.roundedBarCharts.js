Chart.elements.Rectangle.prototype.draw=function(){function i(i){return g[(M+i)%4]}var r=this._chart.ctx,a=this._view,o,u,d,t,e,s,n,l=a.borderWidth,T=this._chart.config.options.cornerRadius,h=this._chart.config.options.fullCornerRadius,v=this._chart.config.type;if(T<0&&(T=0),void 0===T&&(T=0),void 0===h&&(h=!0),a.horizontal?(o=a.base,u=a.x,d=a.y-a.height/2,t=a.y+a.height/2,e=u>o?1:-1,s=1,n=a.borderSkipped||"left"):(o=a.x-a.width/2,u=a.x+a.width/2,d=a.y,t=a.base,e=1,s=t>d?1:-1,n=a.borderSkipped||"bottom"),l){var c=Math.min(Math.abs(o-u),Math.abs(d-t));l=l>c?c:l;var b=l/2,f=o+("left"!==n?b*e:0),C=u+("right"!==n?-b*e:0),q=d+("top"!==n?b*s:0),p=t+("bottom"!==n?-b*s:0);f!==C&&(d=q,t=p),q!==p&&(o=f,u=C)}r.beginPath(),r.fillStyle=a.backgroundColor,r.strokeStyle=a.borderColor,r.lineWidth=l;var g=[[o,t],[o,d],[u,d],[u,t]],m=["bottom","left","top","right"],M=m.indexOf(n,0);-1===M&&(M=0);var y=i(0);r.moveTo(y[0],y[1]);for(var k,x,_,w,S,R,z=1;z<4;z++){y=i(z),k=z+1,4==k&&(k=0),x=i(k),_=g[2][0]-g[1][0],w=g[0][1]-g[1][1],S=g[1][0],R=g[1][1],radius=T,radius>Math.abs(w)/2&&(radius=Math.floor(Math.abs(w)/2)),radius>Math.abs(_)/2&&(radius=Math.floor(Math.abs(_)/2));var W,B,O,P,j,A,D,E;w<0?(W=S,B=S+_,O=R+w,P=R+w,j=S,A=S+_,D=R,E=R,r.moveTo(j+radius,D),r.lineTo(A-radius,E),r.quadraticCurveTo(A,E,A,E-radius),r.lineTo(B,P+radius),h?r.quadraticCurveTo(B,P,B-radius,P):r.lineTo(B,P,B-radius,P),r.lineTo(W+radius,O),h?r.quadraticCurveTo(W,O,W,O+radius):r.lineTo(W,O,W,O+radius),r.lineTo(j,D-radius),r.quadraticCurveTo(j,D,j+radius,D)):_<0?(W=S+_,B=S,O=R,P=R,j=S+_,A=S,D=R+w,E=R+w,r.moveTo(j+radius,D),r.lineTo(A-radius,E),h?r.quadraticCurveTo(A,E,A,E-radius):r.lineTo(A,E,A,E-radius),r.lineTo(B,P+radius),h?r.quadraticCurveTo(B,P,B-radius,P):r.lineTo(B,P,B-radius,P),r.lineTo(W+radius,O),r.quadraticCurveTo(W,O,W,O+radius),r.lineTo(j,D-radius),r.quadraticCurveTo(j,D,j+radius,D)):(r.moveTo(S+radius,R),r.lineTo(S+_-radius,R),r.quadraticCurveTo(S+_,R,S+_,R+radius),r.lineTo(S+_,R+w-radius),h||"horizontalBar"==v?r.quadraticCurveTo(S+_,R+w,S+_-radius,R+w):r.lineTo(S+_,R+w,S+_-radius,R+w),r.lineTo(S+radius,R+w),h?r.quadraticCurveTo(S,R+w,S,R+w-radius):r.lineTo(S,R+w,S,R+w-radius),r.lineTo(S,R+radius),h||"bar"==v?r.quadraticCurveTo(S,R,S+radius,R):r.lineTo(S,R,S+radius,R))}r.fill(),l&&r.stroke()};